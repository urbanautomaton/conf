# shellcheck shell=bash
# vi: set ft=sh:

function enter_goworkspace {
  local -r current_dir=$1

  [[ -n "$GOPATH_AUTO" ]] && return

  GOPATH_AUTO=${current_dir}
  export GOPATH=${current_dir}
  append_path "$GOPATH/bin"
}

function exit_goworkspace {
  if [[ -n "$GOPATH_AUTO" ]]; then
    [[ -n "$GOPATH" ]] && remove_from_path "$GOPATH/bin"
    unset GOPATH_AUTO
    unset GOPATH
  fi
}

register_env_hook .goworkspace goworkspace
